<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Esmeralda - Portfolio</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:ital,opsz,wght@0,6..96,400;1,6..96,400&family=Monsieur+La+Doulaise&display=swap"
        rel="stylesheet">

    <style>
        /* --- RESET & VARIABLES --- */
        :root {
            --bg-pinstripe-1: #fdfbf7;
            --bg-pinstripe-2: #c4d0e0;
            --bg-clay: #e0cec7;
            --bg-paper: #ffffff;
            --text-main: #1a1a1a;
            --font-hand: 'Monsieur La Doulaise', cursive;
            --font-body: 'Bodoni Moda', serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            cursor: none;
        }

        body {
            font-family: var(--font-body);
            color: var(--text-main);
            overflow-x: hidden;
            background-color: var(--bg-pinstripe-1);
        }

        /* --- CUSTOM CURSOR --- */
        #cursor {
            position: fixed;
            top: 0;
            left: 0;
            width: 15px;
            height: 15px;
            /* background-color: #ff3333; REMOVED */
            border: 1.5px solid #000;
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
            /* mix-blend-mode: difference; REMOVED for visibility */
        }

        #cursor.hovered {
            width: 40px;
            height: 40px;
            background-color: transparent;
            border: 1px solid #000;
        }

        @media (max-width: 768px) {
            #cursor {
                display: none;
                /* No cursor on mobile */
            }

            * {
                cursor: auto;
            }
        }

        /* --- DECORATIONS & ANIMATION --- */
        #decorations {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 10;
            overflow: hidden;
        }

        /* Animation Keyframes */
        @keyframes cutIn {
            from {
                opacity: 0;
                transform: translateY(100px) scale(0.9);
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .enter-anim {
            opacity: 0;
            animation: cutIn 1.2s cubic-bezier(0.22, 1, 0.36, 1) forwards;
            animation-delay: var(--delay);
        }

        /* Wrappers: Handle Position & Size Container */
        .cutout-wrapper {
            position: absolute;
            transition: all 0.5s ease;
        }

        /* Images: Handle Rotation & Visuals */
        .cutout-img {
            display: block;
            width: 100%;
            height: auto;
            filter: grayscale(100%) contrast(1.1) brightness(1.05) drop-shadow(0 10px 20px rgba(0, 0, 0, 0.15));
            /* Transition rotation if needed, currently static per class */
        }

        /* --- Specific Positioning (Wrapper) & Rotation (Image) --- */

        /* 1. Esme */
        .cutout-wrapper-esme {
            width: 180px;
            bottom: -10px;
            left: -10px;
        }

        .cutout-img-esme {
            transform: rotate(-5deg);
        }

        /* 2. Moto */
        .cutout-wrapper-moto {
            width: 140px;
            bottom: -10px;
            left: 100px;
            z-index: -1;
            /* Inside parent context? No, siblings. */
        }

        /* Note: sibling z-index works. Wrapper z-index needs to be set relative to each other if they overlap. */
        .cutout-wrapper-moto {
            z-index: -1;
        }

        .cutout-img-moto {
            transform: rotate(10deg);
        }

        /* 3. Redman */
        .cutout-wrapper-redman {
            position: absolute;
            width: 120px;
            bottom: -10px;
            right: 0;
        }

        /* 4. Chess */
        .cutout-wrapper-chess {
            position: absolute;
            width: 80px;
            top: 20%;
            left: -10px;
        }

        /* 5. Mugs */
        .cutout-wrapper-mug1 {
            position: absolute;
            width: 70px;
            top: 10%;
            right: 10px;
        }

        .cutout-wrapper-mug2 {
            position: absolute;
            width: 80px;
            top: 15%;
            right: -10px;
        }


        /* --- RESPONSIVE --- */

        @media (max-width: 768px) {

            /* Hide all decorative PNGs on mobile */
            .cutout-wrapper-esme,
            .cutout-wrapper-moto,
            .cutout-wrapper-redman,
            .cutout-wrapper-chess,
            .cutout-wrapper-mug1,
            .cutout-wrapper-mug2 {
                display: none;
            }
        }

        @media (min-width: 769px) {

            /* Desktop */
            .cutout-wrapper-esme {
                width: 300px;
                bottom: -40px;
                left: -20px;
                right: auto;
            }

            .cutout-img-esme {
                transform: rotate(0deg);
                /* Reset rotation */
            }

            .cutout-wrapper-moto {
                width: 250px;
                bottom: -20px;
                left: 180px;
            }

            .cutout-img-moto {
                transform: rotate(5deg);
            }

            /* 3. Redman */
            .cutout-wrapper-redman {
                width: 150px;
                bottom: 0;
                right: -20px;
                z-index: 5;
            }

            .cutout-img-redman {
                /* Maybe slightly tilted */
                transform: rotate(-2deg);
            }

            /* 4. Chess */
            .cutout-wrapper-chess {
                width: 70px;
                top: 380px;
                left: -20px;
                z-index: 5;
            }

            .cutout-img-chess {
                transform: rotate(15deg);
            }

            /* 5. Mugs */
            .cutout-wrapper-mug1 {
                width: 90px;
                top: 80px;
                right: 40px;
            }

            .cutout-wrapper-mug2 {
                width: 110px;
                top: 150px;
                right: -20px;
            }

            .cutout-img-mug1 {
                transform: rotate(-10deg);
            }

            .cutout-img-mug2 {
                transform: rotate(5deg);
            }
        }

        /* --- DYNAMIC BACKGROUND LAYERS --- */
        #bg-dynamic {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: -1;
            background-color: var(--bg-pinstripe-1);
            transition: background-color 1.5s ease;
        }

        /* Ensure Content sits above Decorations */
        .art-card,
        main {
            position: relative;
            z-index: 20;
        }

        /* --- LAYOUT --- */
        .container {
            display: flex;
            min-height: 100vh;
        }

        /* --- MOBILE HEADER --- */
        #mobile-header {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            padding: 20px;
            justify-content: space-between;
            align-items: center;
            z-index: 200;
            mix-blend-mode: difference;
            /* Ensure visibility */
            color: #fff;
            /* Inverted due to difference */
        }

        .mobile-logo {
            font-family: var(--font-body);
            text-transform: uppercase;
            font-weight: 700;
            font-size: 1.2rem;
            letter-spacing: 1px;
        }

        .menu-toggle {
            font-family: var(--font-body);
            font-style: italic;
            font-size: 1rem;
            cursor: pointer;
        }

        /* --- SIDEBAR NAV --- */
        nav {
            width: 250px;
            padding: 4rem 2rem;
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            z-index: 150;
            transition: transform 0.4s ease;
        }

        .logo {
            font-family: var(--font-body);
            text-transform: uppercase;
            font-size: 1.8rem;
            letter-spacing: 2px;
            font-weight: 700;
        }

        .menu-items {
            display: flex;
            flex-direction: column;
            gap: 0;
            margin-top: 3rem;
            padding-left: 0;
        }

        /* Ensure all direct children divs align */
        .menu-items>div {
            padding-left: 0;
            margin-left: 0;
        }

        .nav-link {
            display: block;
            font-family: var(--font-body);
            font-size: 2rem;
            text-decoration: none;
            color: var(--text-main);
            transition: transform 0.3s ease;
            position: relative;
        }

        .nav-link:hover {
            transform: translateX(10px);
        }

        .sub-menu {
            max-height: 0;
            overflow: hidden;
            margin-left: 1rem;
            transition: max-height 0.5s ease;
            display: flex;
            flex-direction: column;
            gap: 0.3rem;
        }

        /* Click-based expansion instead of hover */
        .has-submenu.open>.sub-menu {
            max-height: 600px;
            margin-top: 0.5rem;
        }

        .sub-link {
            font-family: var(--font-body);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #666;
            text-decoration: none;
            padding: 5px 0;
            display: block;
            transition: color 0.2s ease, transform 0.2s ease;
        }

        .sub-link:hover {
            color: #000;
            transform: translateX(5px);
        }

        /* Category headers in sub-menu */
        .category-header {
            font-family: var(--font-body);
            font-size: 0.9rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #444;
            padding: 8px 0 4px 0;
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
        }

        .category-header::after {
            content: '+';
            font-size: 0.7rem;
            transition: transform 0.3s ease;
        }

        .category-header.open::after {
            transform: rotate(45deg);
        }

        /* Nested sub-menus for mediums */
        .sub-sub-menu {
            max-height: 0;
            overflow: hidden;
            margin-left: 0.5rem;
            transition: max-height 0.35s cubic-bezier(0.4, 0, 0.2, 1),
                margin-top 0.35s cubic-bezier(0.4, 0, 0.2, 1),
                margin-bottom 0.35s cubic-bezier(0.4, 0, 0.2, 1),
                opacity 0.25s ease;
            display: flex;
            flex-direction: column;
            gap: 0.2rem;
            opacity: 0;
        }

        .category-header.open+.sub-sub-menu {
            max-height: 300px;
            margin-top: 0.3rem;
            margin-bottom: 0.5rem;
            opacity: 1;
        }

        .sub-sub-link {
            font-family: var(--font-body);
            font-size: 0.85rem;
            text-transform: none;
            font-style: italic;
            letter-spacing: 0.5px;
            color: #666;
            text-decoration: none;
            padding: 4px 0 4px 12px;
            display: block;
            border-left: 1px solid #ddd;
            transition: all 0.2s ease;
        }

        .sub-sub-link:hover {
            color: #000;
            border-left-color: #000;
            padding-left: 18px;
        }

        /* Menu divider line */
        .menu-divider {
            width: 60%;
            height: 1px;
            background: linear-gradient(to right, #ccc, transparent);
            margin: 15px 0;
        }

        /* Secondary nav items (About, Instagram) */
        .secondary-nav {
            display: flex;
            flex-direction: column;
            gap: 0;
        }

        .secondary-nav .category-header {
            color: #666;
        }

        .socials {
            font-size: 0.75rem;
            letter-spacing: 1px;
            text-transform: uppercase;
            color: #888;
            margin-bottom: 150px;
        }

        /* --- MAIN CONTENT (Vertical Feed) --- */
        main {
            margin-left: 250px;
            width: calc(100% - 250px);
            padding-bottom: 150px;
        }

        .art-feed {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15vh;
            padding-top: 10vh;
        }

        .art-card {
            width: 70%;
            max-width: 900px;
            position: relative;
        }

        .image-wrapper {
            width: 100%;
            position: relative;
        }

        .image-wrapper img {
            width: 100%;
            height: auto;
            display: block;
        }

        /* Video Styling */
        .image-wrapper video {
            width: 100%;
            height: auto;
            display: block;
            background: #000;
        }

        /* Video Controls Wrapper */
        .video-controls-wrapper {
            position: absolute;
            bottom: 20px;
            right: 20px;
            z-index: 10;
            transition: opacity 0.3s ease;
        }

        /* Unmute Button */
        .unmute-btn {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid rgba(0, 0, 0, 0.3);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .unmute-btn:hover {
            background: rgba(255, 255, 255, 1);
            transform: scale(1.1);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
        }

        .unmute-btn:active {
            transform: scale(0.95);
        }

        /* Styling Variants */
        .art-card[data-type="3d-art"] .image-wrapper {
            border-radius: 5px;
        }

        .art-card[data-type="drawing"] .image-wrapper {
            /* No additional styling */
        }

        /* Carousel Container - Viewport */
        .carousel-container {
            width: 100%;
            position: relative;
        }

        /* Carousel Track - Sliding Container */
        .carousel-track {
            display: flex;
            gap: 16px;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            scroll-behavior: smooth;
            scrollbar-width: none;
            /* Firefox */
            -ms-overflow-style: none;
            /* IE 10+ */
            padding-bottom: 20px;
            /* Space for scrollbar if visible during dev */
            margin-bottom: -20px;
            /* Hide scrollbar space */
        }

        .carousel-track::-webkit-scrollbar {
            display: none;
            /* Chrome Safari */
        }

        /* Individual Images in Carousel */
        /* Individual Images in Carousel */
        .carousel-image {
            flex-shrink: 0;
            width: auto;
            height: 600px;
            max-width: 80vw;
            display: block;
            scroll-snap-align: center;
            user-select: none;
            border-radius: 2px;
        }

        @media (max-width: 768px) {
            .carousel-image {
                height: 50vh;
                max-width: 85vw;
                max-height: none;
            }
        }

        /* Carousel Indicator Dots */
        .carousel-indicators {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 15px;
            padding: 10px 0;
        }

        .carousel-indicator {
            width: 8px;
            height: 8px;
            background-color: #ddd;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .carousel-indicator.active {
            background-color: #000;
            transform: scale(1.3);
        }

        /* Navigation Arrows */
        .carousel-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 24px;
            line-height: 1;
            cursor: pointer;
            z-index: 10;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .carousel-arrow:hover {
            background: rgba(255, 255, 255, 1);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            transform: translateY(-50%) scale(1.1);
        }

        .carousel-arrow:active {
            transform: translateY(-50%) scale(0.95);
        }

        .carousel-arrow-left {
            left: 10px;
        }

        .carousel-arrow-right {
            right: 10px;
        }

        /* Mobile: Smaller arrows */
        @media (max-width: 768px) {
            .carousel-arrow {
                width: 32px;
                height: 32px;
                font-size: 20px;
            }
        }

        /* Mobile Metadata (Hidden on desktop) */
        .mobile-meta {
            display: none;
            margin-top: 1rem;
            text-align: left;
        }

        .mobile-meta h3 {
            font-size: 1rem;
            font-family: var(--font-body);
            font-weight: 700;
            margin-bottom: 0.3rem;
        }

        .mobile-meta p {
            font-size: 0.8rem;
            font-family: var(--font-body);
            font-style: italic;
            color: #555;
        }

        /* --- CLOSE BUTTON (Mobile Menu) --- */
        .close-menu-btn {
            display: none;
            /* Hidden on desktop */
            position: fixed;
            top: 20px;
            right: 20px;
            font-family: var(--font-body);
            font-size: 1.8rem;
            cursor: pointer;
            padding: 15px;
            z-index: 250;
            background: transparent;
            line-height: 1;
        }

        /* --- FIXED METADATA FOOTER (Desktop) --- */
        #artwork-footer {
            position: fixed;
            bottom: 250px;
            /* Raised to clear cutouts */
            /* Space from bottom */
            left: 2rem;
            /* Align with sidebar padding (which is 2rem) */
            width: 250px;
            /* Match sidebar width */
            padding-right: 20px;
            z-index: 100;
            display: flex;
            flex-direction: column;
            gap: 15px;
            pointer-events: none;
        }

        #meta-info {
            transition: opacity 0.3s ease;
        }

        #meta-title {
            font-family: var(--font-body);
            font-weight: 700;
            font-size: 1rem;
            margin-bottom: 5px;
        }

        #meta-details {
            font-family: var(--font-body);
            font-size: 0.8rem;
            font-style: italic;
            color: #555;
        }

        #progress-dots {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .dot {
            width: 6px;
            height: 6px;
            aspect-ratio: 1;
            background-color: #bbb;
            border-radius: 50%;
            transition: background-color 0.3s ease, transform 0.3s ease;
        }

        .dot.active {
            background-color: #000;
            transform: scale(1.3);
        }

        /* --- RESPONSIVE / MOBILE --- */
        @media (max-width: 768px) {
            #mobile-header {
                display: flex;
                position: relative;
            }

            .container {
                flex-direction: column;
            }

            nav {
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                background: var(--bg-pinstripe-1);
                /* Use solid color to cover content */
                transform: translateY(-100%);
                /* Hidden above viewport */
                padding: 6rem 2rem;
                /* Add top padding to clear header */
                align-items: center;
                text-align: center;
            }

            nav.open {
                transform: translateY(0);
                z-index: 600; /* Above hero (z-index: 500) when menu is open */
            }

            nav .logo {
                position: fixed;
                top: 20px;
                left: 20px;
                z-index: 700;
            }

            nav .logo .signature-svg {
                height: 5rem;
                width: auto;
                color: #000;
            }

            /* Lock body scroll when mobile menu is open */
            body.menu-open {
                overflow: hidden;
                position: fixed;
                width: 100%;
                height: 100%;
            }

            /* Hide mobile-header when menu is open (nav has its own logo) */
            body.menu-open #mobile-header {
                opacity: 0;
                pointer-events: none;
            }

            main {
                margin-left: 0;
                width: 100%;
            }

            .art-card {
                width: 90%;
            }

            /* Show mobile meta, hide desktop meta */
            .mobile-meta {
                display: block;
            }

            /* Show close button */
            .close-menu-btn {
                display: block;
            }

            /* Hide socials in mobile menu as requested */
            .socials {
                display: none;
            }

            #artwork-footer {
                display: none;
            }

            .art-feed {
                gap: 5vh;
                /* Smaller gap on mobile */
            }

            /* Video Mobile Adjustments */
            .video-controls-wrapper {
                bottom: 15px;
                right: 15px;
            }

            .unmute-btn {
                width: 44px;
                height: 44px;
                font-size: 20px;
            }

            /* Ensure video doesn't overflow on mobile */
            .image-wrapper video {
                max-width: 100%;
                object-fit: contain;
            }
        }

        /* --- SVG SIGNATURE ANIMATION --- */
        .signature-svg {
            height: 8.1rem;
            /* Desktop size - 4.5x bigger */
            width: auto;
            display: block;
        }

        .signature-path {
            fill: transparent;
            stroke: currentColor;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
            animation: draw-signature 0.475s ease-out forwards;
        }

        /* Stagger animation for 8 paths - reordered for first name then last name */
        .signature-path:nth-child(1) {
            animation-delay: 0s;
        }

        .signature-path:nth-child(2) {
            animation-delay: 1.425s;
            /* 4th in sequence */
        }

        .signature-path:nth-child(3) {
            animation-delay: 0.475s;
            /* 2nd in sequence */
        }

        .signature-path:nth-child(4) {
            animation-delay: 0.95s;
            /* 3rd in sequence */
        }

        .signature-path:nth-child(5) {
            animation-delay: 1.9s;
        }

        .signature-path:nth-child(6) {
            animation-delay: 2.375s;
        }

        .signature-path:nth-child(7) {
            animation-delay: 2.85s;
        }

        .signature-path:nth-child(8) {
            animation-delay: 3.325s;
        }

        @keyframes draw-signature {
            0% {
                stroke-dashoffset: var(--path-length);
                fill: transparent;
            }

            85% {
                stroke-dashoffset: 0;
                fill: transparent;
            }

            100% {
                stroke-dashoffset: 0;
                fill: currentColor;
            }
        }

        /* Mobile adjustments */
        @media (max-width: 768px) {
            .mobile-logo .signature-svg {
                height: 5.4rem;
                /* Mobile size - 4.5x bigger */
            }
        }

        /* Accessibility: respect reduced motion preference */
        @media (prefers-reduced-motion: reduce) {
            .signature-path {
                animation: none;
                stroke-dashoffset: 0;
                fill: currentColor;
            }
        }

        /* --- HERO SECTION --- */
        #hero {
            position: relative;
            width: 100%;
            display: flex;
            justify-content: center;
            background-color: var(--bg-pinstripe-1);
            z-index: 500; /* Above everything - covers sidebar/footer while visible */
        }

        .hero-image {
            width: 100%;
            height: auto;
            display: block;
        }

        /* Eye Blink Animation */
        .hero-eyes {
            position: absolute;
            top: 27%;
            left: -1%;
            width: 100%;
            pointer-events: none;
            z-index: 1;
            transform: rotate(-90deg) scale(1.15);
            transform-origin: center center;
        }

        .eye-frame {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: auto;
        }

        .eye-frame:first-child {
            position: relative; /* First image sets container height */
        }

        .eye-open {
            opacity: 1; /* Base state - always visible except during blink */
            animation: blink-open 5s infinite;
        }

        .eye-half {
            opacity: 0;
            animation: blink-half 5s infinite;
        }

        .eye-closed {
            opacity: 0;
            animation: blink-closed 5s infinite;
        }

        /* Blink animation: eyes open most of the time, quick blink at 90-96% and 97-99% */
        @keyframes blink-open {
            0%, 90%, 96%, 97%, 99%, 100% { opacity: 1; }
            91%, 95%, 98% { opacity: 0; }
        }

        @keyframes blink-half {
            0%, 90%, 92%, 96%, 97%, 99%, 100% { opacity: 0; }
            91%, 95%, 98% { opacity: 1; }
        }

        @keyframes blink-closed {
            0%, 91%, 95%, 98%, 100% { opacity: 0; }
            92%, 94% { opacity: 1; }
        }

        /* Respect reduced motion preference */
        @media (prefers-reduced-motion: reduce) {
            .eye-open {
                animation: none;
                opacity: 1;
            }
            .eye-half,
            .eye-closed {
                animation: none;
                opacity: 0;
            }
        }

        /* Earring Sparkle Effect */
        .hero-sparkle {
            position: absolute;
            top: 47.1%;
            left: 55.3%;
            width: 40px;
            height: 40px;
            pointer-events: none;
            z-index: 2;
        }

        .sparkle {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .sparkle::before,
        .sparkle::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            background: white;
            border-radius: 2px;
        }

        /* Vertical beam */
        .sparkle::before {
            width: 3px;
            height: 100%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 8px 2px rgba(255, 255, 255, 0.8),
                        0 0 15px 4px rgba(255, 255, 255, 0.4);
        }

        /* Horizontal beam */
        .sparkle::after {
            width: 100%;
            height: 3px;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 8px 2px rgba(255, 255, 255, 0.8),
                        0 0 15px 4px rgba(255, 255, 255, 0.4);
        }

        /* Diagonal sparkle arms */
        .sparkle-diagonal {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .sparkle-diagonal::before,
        .sparkle-diagonal::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            background: white;
            border-radius: 2px;
            width: 70%;
            height: 2px;
            box-shadow: 0 0 6px 1px rgba(255, 255, 255, 0.6),
                        0 0 12px 3px rgba(255, 255, 255, 0.3);
        }

        .sparkle-diagonal::before {
            transform: translate(-50%, -50%) rotate(45deg);
        }

        .sparkle-diagonal::after {
            transform: translate(-50%, -50%) rotate(-45deg);
        }

        /* Sparkle animation */
        .hero-sparkle {
            animation: sparkle-pulse 2s ease-in-out infinite;
        }

        @keyframes sparkle-pulse {
            0%, 100% {
                opacity: 0.9;
                transform: scale(1);
            }
            50% {
                opacity: 0.5;
                transform: scale(0.8);
            }
        }

        @media (prefers-reduced-motion: reduce) {
            .hero-sparkle {
                animation: none;
                opacity: 0.8;
            }
        }

        /* Motorcycle Overlay */
        .hero-motorcycle {
            position: absolute;
            top: 68.8%;
            left: 24%;
            width: 59%;
            pointer-events: none;
            z-index: 3;
            animation: motorcycle-vibrate 0.08s linear infinite;
        }

        .hero-motorcycle img {
            width: 100%;
            height: auto;
            display: block;
        }

        @keyframes motorcycle-vibrate {
            0%, 100% {
                transform: translate(0, 0) rotate(0deg);
            }
            25% {
                transform: translate(0.5px, -0.5px) rotate(0.1deg);
            }
            50% {
                transform: translate(-0.5px, 0.5px) rotate(-0.1deg);
            }
            75% {
                transform: translate(0.5px, 0.5px) rotate(0.1deg);
            }
        }

        @media (prefers-reduced-motion: reduce) {
            .hero-motorcycle {
                animation: none;
            }
        }

        .hero-signature {
            position: absolute;
            top: 38%;
            left: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
            z-index: 4; /* Above motorcycle (3), sparkle (2), eyes (1) */
        }

        .hero-signature-svg {
            height: 15rem;
            width: auto;
            color: #ffffff;
            filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.5));
        }

        @media (max-width: 768px) {
            .hero-signature-svg {
                height: 10rem;
            }
        }
    </style>
</head>

<body>

    <!-- Hero Section -->
    <section id="hero">
        <img src="assets/images/thailand_days_portrait.JPG" alt="Thailand Days - Oil on Birchwood"
            class="hero-image" />

        <!-- Eye Blink Animation Layer -->
        <div class="hero-eyes">
            <img src="assets/esme-blink/esme-f1.png" class="eye-frame eye-open" alt="" />
            <img src="assets/esme-blink/esme-f2.png" class="eye-frame eye-half" alt="" />
            <img src="assets/esme-blink/esme-f3.png" class="eye-frame eye-closed" alt="" />
        </div>

        <!-- Earring Sparkle -->
        <div class="hero-sparkle">
            <div class="sparkle"></div>
            <div class="sparkle-diagonal"></div>
        </div>

        <!-- Motorcycle Overlay -->
        <div class="hero-motorcycle">
            <img src="assets/motorcycle/motorcycle.png" alt="" />
        </div>

        <div class="hero-signature">
            <svg class="signature-svg hero-signature-svg" xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 528.54 229.25" preserveAspectRatio="xMidYMid meet">
                <path class="signature-path"
                    d="M128.35,18.9c2.75,1.52,9.7,10.68,6.45,13.4-2.93,2.45-7.55-5.71-11.52-5.98-1.9-.13-10.05,3.55-10.57,5.38-1.12,3.96,1.7,2.58,2.22,3.12.41.43.71,6.49,1.22,8.03.45,1.38,3.18,5.65,3.36,7.19.15,1.32-2.13,5.59-2.84,5.74-.84.18-2.16-.91-2.98-.87-13.04.63-10.65-3.46-17.94-10.17-5.64-5.19-19.32-.4-26.05.45-4.62.59-7.27-.82-12.05.46-13.27,3.55-31.28,19.89-28.24,34.93,3.35,16.62,20.08,25.56,35.46,28.54,3.45.67,20.35.9,21.13,1.62.17.16-.17,1.81,0,2,.1.11,1.65-1.12,2.71-1s1.64,1.24,2.59,1.35c11.98,1.36,28.07-1.76,39.98-3.31,7.4-.97,23.48-1.7,29.74-4.26,2.11-.86,6.34-13.74,7.35-16.65.41-1.18-.73,2.7-.2,1.24.76-2.1,1.5-1.16,1.96-2.6.58-1.81,5.42-5.4,5.86-5.78,1.54-1.31,2.78-1.44,4.75-1.58,3.07-.22,5.15.19,7.37,1.11,1.48.61,2.81,1.34,3.25,1.74,1.4,1.29,1.68,1.21,2.14,2.93.69,2.6.02,2.37.4,4.91.16,1.09-3.03,9.44-3.41,10.06-9.49,15.76-7.05.71,4.28-.24.93-.08,15.26-3.97,17.52-4.38,6.9-1.26,16.53-1.61,23.31-4.17,3.22-1.21.6-2.86,2.2-3.34.9-.27,2.63.91,3.54.83,3.69-.32,7.28-.09,10.34-.39,2.12-.21,14.26-5.01,14.81-4.47l-3.5,5.49c10.73,2.18,17.16,10.93,19.78,20.98,3.33,12.78,1.6,18.6-4.02,30.55-22.61,48.09-84.87,68.5-134.5,72-3.26.23-11.47-.94-13.89.12-1.91.84-8.64,11.49-11.12,13.38-.32.25-4.5,2.06-4.75,1.99-.08-.02-.22-1.37-.77-1.5-.71-.17-1.31,1-1.49,1-.84.03,7.47-13.46,4.77-15.76-1.72-1.46-29.81-1.62-33.9-4.6-19.67-2.17-34.23-7.84-50.93-17.07-1.61-.89-5.58-1.36-6.19-1.81-.3-.22-3.46-5.21-4.51-5.99-2.86-2.15-9.16-4.01-12.6-6.76C7.05,175.29-.18,166.69,0,164.76c.01-.14,1.86-2.08,1.99-2.01s.32,1.63,1.55,2.21c8.59,4.07,38,12.55,46.58,10.16,1.16-.32,4.13-3,4.88-2.37.14.12-.14,1.39,0,1.5.2.16,3.37-.73,5.14-.39,19.69,3.78,38.43,10.94,58.67,12.83,1.48.14,11.56.76,12.09.47,2.08-5.75,5.51-11.32,7.86-16.88,4.86-11.5,8.92-24.87,13.36-36.64,1.22-3.25,1.78-6.96,1.37-10.38l-29.29,5.98c-16.49.67-32.41,3.89-48.96,1.52-53.66-7.67-95.37-49.18-32.19-85.69,17.78-10.28,34.69-9.89,52.03-16.47,3.44-1.31,7.57-5.88,11.06-7.44,6.22-2.8,16.02-5.66,22.2-2.24ZM179.94,84.19c-4.2,1.35-10.77,12.68-7.23,14.3,8.12,3.7,13.82,1.94,14.85-10.53.19-2.26-1.42-3.58-5.23-3.96M256.16,140.4c5.24-7.8,10.79-15.85,11.32-25.92.24-4.56-1.48-13.38-5.97-15.51-14.38-6.81-56.59,9.65-72.13,14.91-3.87,1.31-14.5,2.29-16.77,5.73-7.09,23.85-17.99,46.12-28.12,68.63,31.36-.14,64.93-8,90.93-25.84,9.42-6.46,14.47-12.68,20.73-22Z" />
                <path class="signature-path"
                    d="M419.32,87.59c-2.63,7.68-6.22,16.49-10.92,23.82-2.87,4.48-9.36,6.62.06,8.12,3.58.57,22.1-.92,23.8-3.76,1.42-2.37-1.61-5.05,2.92-8.33,2.84-2.06,10.89-3.26,13.65-.52,4.86,4.81-1.73,12.73-1.33,13.34,1.87,2.91,25.51-.52,29.76-.98,1.86-.2,3.76.44,5.26.25,6.08-.78,44.17-10.25,45.97-8.76.56,2.59-3.96,3.32-4.87,4.16-5.54,5.1-13.14,10.67-20.29,13.93-11.78,5.38-53.88,11.97-65.35,7.17-1.52-.64-3.05-3.02-3.81-3.15-1.53-.27-10.17,3.17-12.93,3.39-3.36.28-22.09-2.16-25.24-3.26-1.47-.51-7.55-4.7-8.25-4.73-.78-.03-7.15,3.06-8.63,3.37-6.58,1.38-20.1,3.02-25.6-.67-4.08-2.73-5.67-10.17-6.29-10.2-.36-.02-5.23,3.81-5.87,4.11-15.64,7.31-20.03,11.25-34.39-1.86-.92-.84-2.57-4.15-4.8-5.19-3.68-1.73-7.98.63-11.18-2.81.01-1.73,11.75-.1,13.65-.84,1.74-.67,1.04-3.89,1.96-4.79.23-.23,4.89-3.31,5.24-3.51,3.44-1.87,11.96,1.07,13.74,4.54,2.66,5.2.99,5.56-2.09,9.35,3.67,1.33,7.29-1.11,10.16-1.39,2.68-.26,2.83,2.02,8.68-.51,9.11-3.95,1.94-4.88,6.14-11.6l.76,2.99c3.81-7.34,6.28-19.74,14.3-24.19,2.42-1.34,9.04-3.38,9.93.57,1.28,5.68-3.49,9.24-6.49,13.37-.65.9-.31,2.19-.96,3.04-1.28,1.67-6.84,5.61-7.3,6.75-.42,1.06.42,2.04.18,2.63-.87,2.15-5.21,4.39,2.38,6.3,7.57,1.91,16.34-2.3,22.73-6.17,2.83-15.54,12.37-43.15,33.52-36.46,7.83,2.48,3.53,7.43,1.78,12.52ZM368.5,95.25c-2.89-2.39-12.38,11.11-11.49,11.99,1.46,1.45,12.32-11.31,11.49-11.99Z" />
                <path class="signature-path"
                    d="M184.5,40.25c12.25.41,7.5-9.29,13.26-15.5l2.49,8.48c4.32-4.39,5.82-8.92,12.99-8.48l14.12,8.92c1.29.04,3.85-2.59,5.52-3.29,1.85-.77,3.57,1.13,2.87-1.63,4.49,1.19,7.44,9.28,11.03,9.96,13.23,2.5,10.56-10.01,17.97-13.47,2.66-1.24,11.64-1.89,13.18.57.58.92-2.75,9.02,1.44,10.81,5.12,2.19,26.02-.47,30.8-3.96,1.61-1.18,3.31-4.36,3.59-4.42,1.48-.32,1.06,2.5,1.71,3.28,2.32,2.78,9.75,3.77,2.5,8.93-9.77,6.95-27.69,11.31-39.58,9.65-3.45-.48-9.01-3.72-10.11-3.82-1.27-.12-7.91,4.45-10.94,5.03-4.96.96-10.57.96-14.67-2.24-1.81-1.42-4.67-7.57-7.86-6.38-.57.21-2.52,9.14-7.55,8.61-1.04-.11-8.72-10.49-10.06-12.01-1.48-1.68-3.84-.97-3.7-4.05,1.82-.25.27,1.41,2.24,2,1,.3,3.94.31,3.6-1.27-.48-2.24-2.46-.29-2.85-.47-1.2-.54-1.81-6.97-3.74-5.76-2.25,1.4.38,4.28.24,4.49s-1.5-.95-1.9,1.91c-.2,1.4.74,2,.65,2.64-.32,2.39-1.3,7.75-2.11,9.85-.28.72-4.55,7.4-4.98,7.54-3.96,1.31-3.3-9.53-4.93-9.94-.46-.11-5.97,4.47-7.87,5.12-7.22,2.47-15.01,3.59-22.5,2.27-2.46-.43-8.78-3.07-11.05-2.88-4.21.36-12.85,10.36-18.96,10.81-6.58.48-4.41-2.81-6.46-5.2-.46-.54-2.51-.44-2.87-1.36-.46-1.17,14.36-5.92,15.95-8.04l34.37-27.14c2.65.02,4.23,17.51,4.16,20.43ZM271.99,26.25c-.58-.57-4.73,1.84-3.49,2.99,1.09,1.02,4.47-2.03,3.49-2.99ZM235.99,34.25l-3.99,1.24,3.66.27.33-1.51Z" />
                <path class="signature-path"
                    d="M329.99.74c-.07.1-1.24.06-1.42.82-.9,3.71.51,6.06-5.05,7.96-1.82.62-4.37.1-5.9.56-10.7,3.21-27.17,9.69-37.92,10.66-1.17.10-5.85-1.36-6.38-1.93-.67-.72-.32-2.55-1.56-4.06-.67-.81-7.5-3.77-6.25-4.49.51-.29,9.31.19,11.67-.07,12.56-1.4,33.48-3.96,45.22-7.28.53-.15,9.43-4.61,7.6-2.15Z" />
                <path class="signature-path"
                    d="M303.34,142.39c.41.27,3.03,4.46,3.05,5,.02.51-1.77,9.55-1.99,10.01-2.8,6.05-8.24-6.68-8.41-8.86-.02-.21.84-3.93,1-4.06.38-.32,1.16.41,1.39.2,1.03-.91,2.18-4.08,4.95-2.29Z" />
                <path class="signature-path"
                    d="M322.38,156.64c-.11.27-3.4,4.43-3.68,4.52-5.31,1.57-7.15-16.32-.37-16.35,2.28-.01,4.98,9.51,4.04,11.84Z" />
                <path class="signature-path"
                    d="M462.82,85.57c-5.5,7.03-8.45-7.82-5.11-10.36,1.92-1.46,5.64.3,6.78-3.45.07,3.99.85,10.59-1.67,13.82Z" />
                <path class="signature-path"
                    d="M450.35,82.1c-5.51,5.43-10.49-5.76-4.63-8.89,1.66-.89,3.03-.09,4.18-.58.16-.07,1.3-2.39,1.86-2.37,2.48.08-.23,10.69-1.4,11.84Z" />
            </svg>
        </div>
    </section>

    <!-- DEBUG: Animation Frame Scrubber - Remove after testing -->
    <div id="frame-controls" style="position: fixed; bottom: 10px; left: 10px; background: rgba(0,0,0,0.9); padding: 15px; border-radius: 8px; z-index: 9999; color: white; font-family: monospace; font-size: 12px; min-width: 220px;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
            <span style="font-weight: bold;">Debug Controls</span>
            <button id="minimize-btn" style="background: #4a4a4a; color: white; border: none; border-radius: 3px; width: 24px; height: 24px; cursor: pointer; font-size: 16px; line-height: 1;">−</button>
        </div>
        <div id="controls-content">
        <div style="margin-bottom: 12px;">
            <label>Frame: <span id="frame-label">Open (f1)</span></label><br>
            <input type="range" id="frame-slider" min="0" max="4" step="1" value="0" style="width: 100%; margin-top: 5px;">
        </div>
        <div style="display: flex; justify-content: space-between; font-size: 10px; margin-bottom: 10px; color: #888;">
            <span>Open</span>
            <span>Half</span>
            <span>Closed</span>
            <span>Half</span>
            <span>Open</span>
        </div>
        <div style="border-top: 1px solid #555; padding-top: 10px;">
            <button id="play-cycle" style="width: 100%; padding: 8px; background: #4a4a4a; color: white; border: none; border-radius: 4px; cursor: pointer;">Play Blink Cycle</button>
        </div>

        <!-- Sparkle Position Controls -->
        <div style="border-top: 1px solid #555; margin-top: 12px; padding-top: 12px;">
            <div style="margin-bottom: 10px; font-weight: bold;">Sparkle Position</div>
            <div style="margin-bottom: 8px;">
                <div style="display: flex; align-items: center; gap: 6px; margin-bottom: 3px;">
                    <label style="flex: 1;">Top: <span id="sparkle-top-val">47.1</span>%</label>
                    <button class="adj-btn" data-target="sparkle-top" data-delta="-1">−1</button>
                    <button class="adj-btn" data-target="sparkle-top" data-delta="-0.1">−.1</button>
                    <button class="adj-btn" data-target="sparkle-top" data-delta="0.1">+.1</button>
                    <button class="adj-btn" data-target="sparkle-top" data-delta="1">+1</button>
                </div>
                <input type="range" id="sparkle-top" min="0" max="100" step="0.1" value="47.1" style="width: 100%;">
            </div>
            <div style="margin-bottom: 8px;">
                <div style="display: flex; align-items: center; gap: 6px; margin-bottom: 3px;">
                    <label style="flex: 1;">Left: <span id="sparkle-left-val">55.3</span>%</label>
                    <button class="adj-btn" data-target="sparkle-left" data-delta="-1">−1</button>
                    <button class="adj-btn" data-target="sparkle-left" data-delta="-0.1">−.1</button>
                    <button class="adj-btn" data-target="sparkle-left" data-delta="0.1">+.1</button>
                    <button class="adj-btn" data-target="sparkle-left" data-delta="1">+1</button>
                </div>
                <input type="range" id="sparkle-left" min="0" max="100" step="0.1" value="55.3" style="width: 100%;">
            </div>
            <div style="margin-bottom: 8px;">
                <div style="display: flex; align-items: center; gap: 6px; margin-bottom: 3px;">
                    <label style="flex: 1;">Size: <span id="sparkle-size-val">40</span>px</label>
                    <button class="adj-btn" data-target="sparkle-size" data-delta="-5">−5</button>
                    <button class="adj-btn" data-target="sparkle-size" data-delta="-1">−1</button>
                    <button class="adj-btn" data-target="sparkle-size" data-delta="1">+1</button>
                    <button class="adj-btn" data-target="sparkle-size" data-delta="5">+5</button>
                </div>
                <input type="range" id="sparkle-size" min="10" max="150" step="1" value="40" style="width: 100%;">
            </div>
            <div style="background: #333; padding: 8px; border-radius: 4px; margin-top: 10px;">
                <div style="font-size: 10px; color: #aaa; margin-bottom: 4px;">Copy these values:</div>
                <code id="sparkle-values" style="font-size: 11px; color: #4fc3f7;">top: 47.1%; left: 55.3%; width: 40px;</code>
            </div>
        </div>

        <!-- Motorcycle Position Controls -->
        <div style="border-top: 1px solid #555; margin-top: 12px; padding-top: 12px;">
            <div style="margin-bottom: 10px; font-weight: bold;">Motorcycle Position</div>
            <div style="margin-bottom: 8px;">
                <div style="display: flex; align-items: center; gap: 6px; margin-bottom: 3px;">
                    <label style="flex: 1;">Top: <span id="moto-top-val">68.8</span>%</label>
                    <button class="adj-btn" data-target="moto-top" data-delta="-1">−1</button>
                    <button class="adj-btn" data-target="moto-top" data-delta="-0.1">−.1</button>
                    <button class="adj-btn" data-target="moto-top" data-delta="0.1">+.1</button>
                    <button class="adj-btn" data-target="moto-top" data-delta="1">+1</button>
                </div>
                <input type="range" id="moto-top" min="0" max="100" step="0.1" value="68.8" style="width: 100%;">
            </div>
            <div style="margin-bottom: 8px;">
                <div style="display: flex; align-items: center; gap: 6px; margin-bottom: 3px;">
                    <label style="flex: 1;">Left: <span id="moto-left-val">24</span>%</label>
                    <button class="adj-btn" data-target="moto-left" data-delta="-1">−1</button>
                    <button class="adj-btn" data-target="moto-left" data-delta="-0.1">−.1</button>
                    <button class="adj-btn" data-target="moto-left" data-delta="0.1">+.1</button>
                    <button class="adj-btn" data-target="moto-left" data-delta="1">+1</button>
                </div>
                <input type="range" id="moto-left" min="0" max="100" step="0.1" value="24" style="width: 100%;">
            </div>
            <div style="margin-bottom: 8px;">
                <div style="display: flex; align-items: center; gap: 6px; margin-bottom: 3px;">
                    <label style="flex: 1;">Width: <span id="moto-width-val">59</span>%</label>
                    <button class="adj-btn" data-target="moto-width" data-delta="-1">−1</button>
                    <button class="adj-btn" data-target="moto-width" data-delta="-0.1">−.1</button>
                    <button class="adj-btn" data-target="moto-width" data-delta="0.1">+.1</button>
                    <button class="adj-btn" data-target="moto-width" data-delta="1">+1</button>
                </div>
                <input type="range" id="moto-width" min="5" max="100" step="0.1" value="59" style="width: 100%;">
            </div>
            <div style="background: #333; padding: 8px; border-radius: 4px; margin-top: 10px;">
                <div style="font-size: 10px; color: #aaa; margin-bottom: 4px;">Copy these values:</div>
                <code id="moto-values" style="font-size: 11px; color: #4fc3f7;">top: 68.8%; left: 24%; width: 59%;</code>
            </div>
        </div>
        </div>
        <style>
            .adj-btn {
                padding: 2px 6px;
                background: #4a4a4a;
                color: white;
                border: none;
                border-radius: 3px;
                cursor: pointer;
                font-size: 10px;
                font-family: monospace;
            }
            .adj-btn:hover {
                background: #666;
            }
        </style>
    </div>
    <script>
        (function() {
            const eyeOpen = document.querySelector('.eye-open');
            const eyeHalf = document.querySelector('.eye-half');
            const eyeClosed = document.querySelector('.eye-closed');
            const frameSlider = document.getElementById('frame-slider');
            const frameLabel = document.getElementById('frame-label');
            const playBtn = document.getElementById('play-cycle');
            const minimizeBtn = document.getElementById('minimize-btn');
            const controlsContent = document.getElementById('controls-content');

            // Minimize toggle
            let minimized = false;
            minimizeBtn.addEventListener('click', () => {
                minimized = !minimized;
                controlsContent.style.display = minimized ? 'none' : 'block';
                minimizeBtn.textContent = minimized ? '+' : '−';
            });

            // Remove CSS animations to allow JS control of opacity
            [eyeOpen, eyeHalf, eyeClosed].forEach(el => {
                el.style.animation = 'none';
            });

            const frames = [
                { open: 1, half: 0, closed: 0, label: 'Open (f1)' },
                { open: 0, half: 1, closed: 0, label: 'Half-closed (f2)' },
                { open: 0, half: 0, closed: 1, label: 'Closed (f3)' },
                { open: 0, half: 1, closed: 0, label: 'Half-open (f2)' },
                { open: 1, half: 0, closed: 0, label: 'Open (f1)' }
            ];

            function setFrame(index) {
                const frame = frames[index];
                eyeOpen.style.opacity = frame.open;
                eyeHalf.style.opacity = frame.half;
                eyeClosed.style.opacity = frame.closed;
                frameLabel.textContent = frame.label;
                frameSlider.value = index;
            }

            frameSlider.addEventListener('input', () => {
                // Stop auto-play when user manually scrubs
                if (autoPlaying) {
                    stopAutoPlay();
                }
                setFrame(parseInt(frameSlider.value));
            });

            // Auto-play blink cycle
            let autoPlaying = true;
            let autoPlayCancelled = false;

            function sleep(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }

            async function doBlink() {
                const blinkSequence = [0, 1, 2, 1, 0]; // open→half→closed→half→open
                for (const frameIdx of blinkSequence) {
                    if (autoPlayCancelled) return;
                    setFrame(frameIdx);
                    await sleep(75);
                }
            }

            async function runBlinkCycle() {
                while (!autoPlayCancelled) {
                    // 4 seconds open
                    setFrame(0);
                    await sleep(4000);
                    if (autoPlayCancelled) return;

                    // Double blink
                    await doBlink();
                    if (autoPlayCancelled) return;
                    await sleep(100); // small gap between blinks
                    await doBlink();
                    if (autoPlayCancelled) return;

                    // 3 seconds open
                    setFrame(0);
                    await sleep(3000);
                    if (autoPlayCancelled) return;

                    // Single blink
                    await doBlink();
                }
            }

            function stopAutoPlay() {
                autoPlaying = false;
                autoPlayCancelled = true;
                playBtn.textContent = 'Start Auto Blink';
            }

            function startAutoPlay() {
                autoPlaying = true;
                autoPlayCancelled = false;
                playBtn.textContent = 'Stop Auto Blink';
                runBlinkCycle();
            }

            playBtn.addEventListener('click', () => {
                if (autoPlaying) {
                    stopAutoPlay();
                } else {
                    startAutoPlay();
                }
            });

            // Initialize and start auto-play
            setFrame(0);
            playBtn.textContent = 'Stop Auto Blink';
            runBlinkCycle();

            // Sparkle position controls
            const sparkle = document.querySelector('.hero-sparkle');
            const sparkleTop = document.getElementById('sparkle-top');
            const sparkleLeft = document.getElementById('sparkle-left');
            const sparkleSize = document.getElementById('sparkle-size');
            const sparkleTopVal = document.getElementById('sparkle-top-val');
            const sparkleLeftVal = document.getElementById('sparkle-left-val');
            const sparkleSizeVal = document.getElementById('sparkle-size-val');
            const sparkleValues = document.getElementById('sparkle-values');

            function updateSparkle() {
                const top = sparkleTop.value;
                const left = sparkleLeft.value;
                const size = sparkleSize.value;

                sparkle.style.top = top + '%';
                sparkle.style.left = left + '%';
                sparkle.style.width = size + 'px';
                sparkle.style.height = size + 'px';

                sparkleTopVal.textContent = top;
                sparkleLeftVal.textContent = left;
                sparkleSizeVal.textContent = size;
                sparkleValues.textContent = `top: ${top}%; left: ${left}%; width: ${size}px;`;
            }

            sparkleTop.addEventListener('input', updateSparkle);
            sparkleLeft.addEventListener('input', updateSparkle);
            sparkleSize.addEventListener('input', updateSparkle);

            // Motorcycle position controls
            const motorcycle = document.querySelector('.hero-motorcycle');
            const motoTop = document.getElementById('moto-top');
            const motoLeft = document.getElementById('moto-left');
            const motoWidth = document.getElementById('moto-width');
            const motoTopVal = document.getElementById('moto-top-val');
            const motoLeftVal = document.getElementById('moto-left-val');
            const motoWidthVal = document.getElementById('moto-width-val');
            const motoValues = document.getElementById('moto-values');

            function updateMotorcycle() {
                const top = motoTop.value;
                const left = motoLeft.value;
                const width = motoWidth.value;

                motorcycle.style.top = top + '%';
                motorcycle.style.left = left + '%';
                motorcycle.style.width = width + '%';

                motoTopVal.textContent = top;
                motoLeftVal.textContent = left;
                motoWidthVal.textContent = width;
                motoValues.textContent = `top: ${top}%; left: ${left}%; width: ${width}%;`;
            }

            motoTop.addEventListener('input', updateMotorcycle);
            motoLeft.addEventListener('input', updateMotorcycle);
            motoWidth.addEventListener('input', updateMotorcycle);

            // Adjustment buttons
            document.querySelectorAll('.adj-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const target = document.getElementById(btn.dataset.target);
                    const delta = parseFloat(btn.dataset.delta);
                    const min = parseFloat(target.min);
                    const max = parseFloat(target.max);
                    let newVal = parseFloat(target.value) + delta;
                    newVal = Math.max(min, Math.min(max, newVal));
                    target.value = newVal;
                    // Update the appropriate element based on which control was adjusted
                    if (btn.dataset.target.startsWith('sparkle')) {
                        updateSparkle();
                    } else if (btn.dataset.target.startsWith('moto')) {
                        updateMotorcycle();
                    }
                });
            });
        })();
    </script>

    <div id="bg-dynamic"></div>

    <!-- Mobile Header -->
    <div id="mobile-header">
        <div class="mobile-logo">
            <svg class="signature-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 528.54 229.25"
                preserveAspectRatio="xMidYMid meet">
                <path class="signature-path"
                    d="M128.35,18.9c2.75,1.52,9.7,10.68,6.45,13.4-2.93,2.45-7.55-5.71-11.52-5.98-1.9-.13-10.05,3.55-10.57,5.38-1.12,3.96,1.7,2.58,2.22,3.12.41.43.71,6.49,1.22,8.03.45,1.38,3.18,5.65,3.36,7.19.15,1.32-2.13,5.59-2.84,5.74-.84.18-2.16-.91-2.98-.87-13.04.63-10.65-3.46-17.94-10.17-5.64-5.19-19.32-.4-26.05.45-4.62.59-7.27-.82-12.05.46-13.27,3.55-31.28,19.89-28.24,34.93,3.35,16.62,20.08,25.56,35.46,28.54,3.45.67,20.35.9,21.13,1.62.17.16-.17,1.81,0,2,.1.11,1.65-1.12,2.71-1s1.64,1.24,2.59,1.35c11.98,1.36,28.07-1.76,39.98-3.31,7.4-.97,23.48-1.7,29.74-4.26,2.11-.86,6.34-13.74,7.35-16.65.41-1.18-.73,2.7-.2,1.24.76-2.1,1.5-1.16,1.96-2.6.58-1.81,5.42-5.4,5.86-5.78,1.54-1.31,2.78-1.44,4.75-1.58,3.07-.22,5.15.19,7.37,1.11,1.48.61,2.81,1.34,3.25,1.74,1.4,1.29,1.68,1.21,2.14,2.93.69,2.6.02,2.37.4,4.91.16,1.09-3.03,9.44-3.41,10.06-9.49,15.76-7.05.71,4.28-.24.93-.08,15.26-3.97,17.52-4.38,6.9-1.26,16.53-1.61,23.31-4.17,3.22-1.21.6-2.86,2.2-3.34.9-.27,2.63.91,3.54.83,3.69-.32,7.28-.09,10.34-.39,2.12-.21,14.26-5.01,14.81-4.47l-3.5,5.49c10.73,2.18,17.16,10.93,19.78,20.98,3.33,12.78,1.6,18.6-4.02,30.55-22.61,48.09-84.87,68.5-134.5,72-3.26.23-11.47-.94-13.89.12-1.91.84-8.64,11.49-11.12,13.38-.32.25-4.5,2.06-4.75,1.99-.08-.02-.22-1.37-.77-1.5-.71-.17-1.31,1-1.49,1-.84.03,7.47-13.46,4.77-15.76-1.72-1.46-29.81-1.62-33.9-4.6-19.67-2.17-34.23-7.84-50.93-17.07-1.61-.89-5.58-1.36-6.19-1.81-.3-.22-3.46-5.21-4.51-5.99-2.86-2.15-9.16-4.01-12.6-6.76C7.05,175.29-.18,166.69,0,164.76c.01-.14,1.86-2.08,1.99-2.01s.32,1.63,1.55,2.21c8.59,4.07,38,12.55,46.58,10.16,1.16-.32,4.13-3,4.88-2.37.14.12-.14,1.39,0,1.5.2.16,3.37-.73,5.14-.39,19.69,3.78,38.43,10.94,58.67,12.83,1.48.14,11.56.76,12.09.47,2.08-5.75,5.51-11.32,7.86-16.88,4.86-11.5,8.92-24.87,13.36-36.64,1.22-3.25,1.78-6.96,1.37-10.38l-29.29,5.98c-16.49.67-32.41,3.89-48.96,1.52-53.66-7.67-95.37-49.18-32.19-85.69,17.78-10.28,34.69-9.89,52.03-16.47,3.44-1.31,7.57-5.88,11.06-7.44,6.22-2.8,16.02-5.66,22.2-2.24ZM179.94,84.19c-4.2,1.35-10.77,12.68-7.23,14.3,8.12,3.7,13.82,1.94,14.85-10.53.19-2.26-1.42-3.58-5.23-3.96M256.16,140.4c5.24-7.8,10.79-15.85,11.32-25.92.24-4.56-1.48-13.38-5.97-15.51-14.38-6.81-56.59,9.65-72.13,14.91-3.87,1.31-14.5,2.29-16.77,5.73-7.09,23.85-17.99,46.12-28.12,68.63,31.36-.14,64.93-8,90.93-25.84,9.42-6.46,14.47-12.68,20.73-22Z" />
                <path class="signature-path"
                    d="M419.32,87.59c-2.63,7.68-6.22,16.49-10.92,23.82-2.87,4.48-9.36,6.62.06,8.12,3.58.57,22.1-.92,23.8-3.76,1.42-2.37-1.61-5.05,2.92-8.33,2.84-2.06,10.89-3.26,13.65-.52,4.86,4.81-1.73,12.73-1.33,13.34,1.87,2.91,25.51-.52,29.76-.98,1.86-.2,3.76.44,5.26.25,6.08-.78,44.17-10.25,45.97-8.76.56,2.59-3.96,3.32-4.87,4.16-5.54,5.1-13.14,10.67-20.29,13.93-11.78,5.38-53.88,11.97-65.35,7.17-1.52-.64-3.05-3.02-3.81-3.15-1.53-.27-10.17,3.17-12.93,3.39-3.36.28-22.09-2.16-25.24-3.26-1.47-.51-7.55-4.7-8.25-4.73-.78-.03-7.15,3.06-8.63,3.37-6.58,1.38-20.1,3.02-25.6-.67-4.08-2.73-5.67-10.17-6.29-10.2-.36-.02-5.23,3.81-5.87,4.11-15.64,7.31-20.03,11.25-34.39-1.86-.92-.84-2.57-4.15-4.8-5.19-3.68-1.73-7.98.63-11.18-2.81.01-1.73,11.75-.1,13.65-.84,1.74-.67,1.04-3.89,1.96-4.79.23-.23,4.89-3.31,5.24-3.51,3.44-1.87,11.96,1.07,13.74,4.54,2.66,5.2.99,5.56-2.09,9.35,3.67,1.33,7.29-1.11,10.16-1.39,2.68-.26,2.83,2.02,8.68-.51,9.11-3.95,1.94-4.88,6.14-11.6l.76,2.99c3.81-7.34,6.28-19.74,14.3-24.19,2.42-1.34,9.04-3.38,9.93.57,1.28,5.68-3.49,9.24-6.49,13.37-.65.9-.31,2.19-.96,3.04-1.28,1.67-6.84,5.61-7.3,6.75-.42,1.06.42,2.04.18,2.63-.87,2.15-5.21,4.39,2.38,6.3,7.57,1.91,16.34-2.3,22.73-6.17,2.83-15.54,12.37-43.15,33.52-36.46,7.83,2.48,3.53,7.43,1.78,12.52ZM368.5,95.25c-2.89-2.39-12.38,11.11-11.49,11.99,1.46,1.45,12.32-11.31,11.49-11.99Z" />
                <path class="signature-path"
                    d="M184.5,40.25c12.25.41,7.5-9.29,13.26-15.5l2.49,8.48c4.32-4.39,5.82-8.92,12.99-8.48l14.12,8.92c1.29.04,3.85-2.59,5.52-3.29,1.85-.77,3.57,1.13,2.87-1.63,4.49,1.19,7.44,9.28,11.03,9.96,13.23,2.5,10.56-10.01,17.97-13.47,2.66-1.24,11.64-1.89,13.18.57.58.92-2.75,9.02,1.44,10.81,5.12,2.19,26.02-.47,30.8-3.96,1.61-1.18,3.31-4.36,3.59-4.42,1.48-.32,1.06,2.5,1.71,3.28,2.32,2.78,9.75,3.77,2.5,8.93-9.77,6.95-27.69,11.31-39.58,9.65-3.45-.48-9.01-3.72-10.11-3.82-1.27-.12-7.91,4.45-10.94,5.03-4.96.96-10.57.96-14.67-2.24-1.81-1.42-4.67-7.57-7.86-6.38-.57.21-2.52,9.14-7.55,8.61-1.04-.11-8.72-10.49-10.06-12.01-1.48-1.68-3.84-.97-3.7-4.05,1.82-.25.27,1.41,2.24,2,1,.3,3.94.31,3.6-1.27-.48-2.24-2.46-.29-2.85-.47-1.2-.54-1.81-6.97-3.74-5.76-2.25,1.4.38,4.28.24,4.49s-1.5-.95-1.9,1.91c-.2,1.4.74,2,.65,2.64-.32,2.39-1.3,7.75-2.11,9.85-.28.72-4.55,7.4-4.98,7.54-3.96,1.31-3.3-9.53-4.93-9.94-.46-.11-5.97,4.47-7.87,5.12-7.22,2.47-15.01,3.59-22.5,2.27-2.46-.43-8.78-3.07-11.05-2.88-4.21.36-12.85,10.36-18.96,10.81-6.58.48-4.41-2.81-6.46-5.2-.46-.54-2.51-.44-2.87-1.36-.46-1.17,14.36-5.92,15.95-8.04l34.37-27.14c2.65.02,4.23,17.51,4.16,20.43ZM271.99,26.25c-.58-.57-4.73,1.84-3.49,2.99,1.09,1.02,4.47-2.03,3.49-2.99ZM235.99,34.25l-3.99,1.24,3.66.27.33-1.51Z" />
                <path class="signature-path"
                    d="M329.99.74c-.07.1-1.24.06-1.42.82-.9,3.71.51,6.06-5.05,7.96-1.82.62-4.37.1-5.9.56-10.7,3.21-27.17,9.69-37.92,10.66-1.17.10-5.85-1.36-6.38-1.93-.67-.72-.32-2.55-1.56-4.06-.67-.81-7.5-3.77-6.25-4.49.51-.29,9.31.19,11.67-.07,12.56-1.4,33.48-3.96,45.22-7.28.53-.15,9.43-4.61,7.6-2.15Z" />
                <path class="signature-path"
                    d="M303.34,142.39c.41.27,3.03,4.46,3.05,5,.02.51-1.77,9.55-1.99,10.01-2.8,6.05-8.24-6.68-8.41-8.86-.02-.21.84-3.93,1-4.06.38-.32,1.16.41,1.39.2,1.03-.91,2.18-4.08,4.95-2.29Z" />
                <path class="signature-path"
                    d="M322.38,156.64c-.11.27-3.4,4.43-3.68,4.52-5.31,1.57-7.15-16.32-.37-16.35,2.28-.01,4.98,9.51,4.04,11.84Z" />
                <path class="signature-path"
                    d="M462.82,85.57c-5.5,7.03-8.45-7.82-5.11-10.36,1.92-1.46,5.64.3,6.78-3.45.07,3.99.85,10.59-1.67,13.82Z" />
                <path class="signature-path"
                    d="M450.35,82.1c-5.51,5.43-10.49-5.76-4.63-8.89,1.66-.89,3.03-.09,4.18-.58.16-.07,1.3-2.39,1.86-2.37,2.48.08-.23,10.69-1.4,11.84Z" />
            </svg>
        </div>
        <div class="menu-toggle" id="menu-toggle">Menu</div>
    </div>

    <div id="cursor"></div>

    <!-- Desktop Footer Info (Hidden on mobile) -->
    <div id="artwork-footer">
        <div id="meta-info">
            <div id="meta-title">Loading...</div>
            <div id="meta-details">Scroll to view works</div>
        </div>
        <div id="progress-dots">
        </div>
    </div>

    <!-- DECORATIONS moved here -->
    <div id="decorations">
        <!-- Wrappers for Animation -->
        <div class="cutout-wrapper cutout-wrapper-esme enter-anim" style="--delay: 0.5s">
            <img src="assets/images/esme.png" class="cutout-img cutout-img-esme" alt="Decor">
        </div>
        <div class="cutout-wrapper cutout-wrapper-moto enter-anim" style="--delay: 0.8s">
            <img src="assets/images/motorcycle.png" class="cutout-img cutout-img-moto" alt="Decor">
        </div>

        <!-- New items -->
        <div class="cutout-wrapper cutout-wrapper-redman enter-anim" style="--delay: 1.1s">
            <img src="assets/images/redman.png" class="cutout-img cutout-img-redman" alt="Decor">
        </div>
        <!-- Chess cutout removed - image file missing -->
        <!-- <div class="cutout-wrapper cutout-wrapper-chess enter-anim" style="--delay: 1.3s">
            <img src="assets/images/chess_01.png" class="cutout-img cutout-img-chess" alt="Decor">
        </div> -->
        <div class="cutout-wrapper cutout-wrapper-mug1 enter-anim" style="--delay: 1.5s">
            <img src="assets/images/mug_01.png" class="cutout-img cutout-img-mug1" alt="Decor">
        </div>
        <div class="cutout-wrapper cutout-wrapper-mug2 enter-anim" style="--delay: 1.6s">
            <img src="assets/images/mug_02.png" class="cutout-img cutout-img-mug2" alt="Decor">
        </div>
    </div>

    <div class="container">
        <!-- Navigation (Sidebar on Desktop, Full Overlay on Mobile) -->
        <nav id="main-nav">
            <div class="close-menu-btn" id="close-menu-btn">✕</div>
            <div class="logo">
                <svg class="signature-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 528.54 229.25"
                    preserveAspectRatio="xMidYMid meet">
                    <path class="signature-path"
                        d="M128.35,18.9c2.75,1.52,9.7,10.68,6.45,13.4-2.93,2.45-7.55-5.71-11.52-5.98-1.9-.13-10.05,3.55-10.57,5.38-1.12,3.96,1.7,2.58,2.22,3.12.41.43.71,6.49,1.22,8.03.45,1.38,3.18,5.65,3.36,7.19.15,1.32-2.13,5.59-2.84,5.74-.84.18-2.16-.91-2.98-.87-13.04.63-10.65-3.46-17.94-10.17-5.64-5.19-19.32-.4-26.05.45-4.62.59-7.27-.82-12.05.46-13.27,3.55-31.28,19.89-28.24,34.93,3.35,16.62,20.08,25.56,35.46,28.54,3.45.67,20.35.9,21.13,1.62.17.16-.17,1.81,0,2,.1.11,1.65-1.12,2.71-1s1.64,1.24,2.59,1.35c11.98,1.36,28.07-1.76,39.98-3.31,7.4-.97,23.48-1.7,29.74-4.26,2.11-.86,6.34-13.74,7.35-16.65.41-1.18-.73,2.7-.2,1.24.76-2.1,1.5-1.16,1.96-2.6.58-1.81,5.42-5.4,5.86-5.78,1.54-1.31,2.78-1.44,4.75-1.58,3.07-.22,5.15.19,7.37,1.11,1.48.61,2.81,1.34,3.25,1.74,1.4,1.29,1.68,1.21,2.14,2.93.69,2.6.02,2.37.4,4.91.16,1.09-3.03,9.44-3.41,10.06-9.49,15.76-7.05.71,4.28-.24.93-.08,15.26-3.97,17.52-4.38,6.9-1.26,16.53-1.61,23.31-4.17,3.22-1.21.6-2.86,2.2-3.34.9-.27,2.63.91,3.54.83,3.69-.32,7.28-.09,10.34-.39,2.12-.21,14.26-5.01,14.81-4.47l-3.5,5.49c10.73,2.18,17.16,10.93,19.78,20.98,3.33,12.78,1.6,18.6-4.02,30.55-22.61,48.09-84.87,68.5-134.5,72-3.26.23-11.47-.94-13.89.12-1.91.84-8.64,11.49-11.12,13.38-.32.25-4.5,2.06-4.75,1.99-.08-.02-.22-1.37-.77-1.5-.71-.17-1.31,1-1.49,1-.84.03,7.47-13.46,4.77-15.76-1.72-1.46-29.81-1.62-33.9-4.6-19.67-2.17-34.23-7.84-50.93-17.07-1.61-.89-5.58-1.36-6.19-1.81-.3-.22-3.46-5.21-4.51-5.99-2.86-2.15-9.16-4.01-12.6-6.76C7.05,175.29-.18,166.69,0,164.76c.01-.14,1.86-2.08,1.99-2.01s.32,1.63,1.55,2.21c8.59,4.07,38,12.55,46.58,10.16,1.16-.32,4.13-3,4.88-2.37.14.12-.14,1.39,0,1.5.2.16,3.37-.73,5.14-.39,19.69,3.78,38.43,10.94,58.67,12.83,1.48.14,11.56.76,12.09.47,2.08-5.75,5.51-11.32,7.86-16.88,4.86-11.5,8.92-24.87,13.36-36.64,1.22-3.25,1.78-6.96,1.37-10.38l-29.29,5.98c-16.49.67-32.41,3.89-48.96,1.52-53.66-7.67-95.37-49.18-32.19-85.69,17.78-10.28,34.69-9.89,52.03-16.47,3.44-1.31,7.57-5.88,11.06-7.44,6.22-2.8,16.02-5.66,22.2-2.24ZM179.94,84.19c-4.2,1.35-10.77,12.68-7.23,14.3,8.12,3.7,13.82,1.94,14.85-10.53.19-2.26-1.42-3.58-5.23-3.96M256.16,140.4c5.24-7.8,10.79-15.85,11.32-25.92.24-4.56-1.48-13.38-5.97-15.51-14.38-6.81-56.59,9.65-72.13,14.91-3.87,1.31-14.5,2.29-16.77,5.73-7.09,23.85-17.99,46.12-28.12,68.63,31.36-.14,64.93-8,90.93-25.84,9.42-6.46,14.47-12.68,20.73-22Z" />
                    <path class="signature-path"
                        d="M419.32,87.59c-2.63,7.68-6.22,16.49-10.92,23.82-2.87,4.48-9.36,6.62.06,8.12,3.58.57,22.1-.92,23.8-3.76,1.42-2.37-1.61-5.05,2.92-8.33,2.84-2.06,10.89-3.26,13.65-.52,4.86,4.81-1.73,12.73-1.33,13.34,1.87,2.91,25.51-.52,29.76-.98,1.86-.2,3.76.44,5.26.25,6.08-.78,44.17-10.25,45.97-8.76.56,2.59-3.96,3.32-4.87,4.16-5.54,5.1-13.14,10.67-20.29,13.93-11.78,5.38-53.88,11.97-65.35,7.17-1.52-.64-3.05-3.02-3.81-3.15-1.53-.27-10.17,3.17-12.93,3.39-3.36.28-22.09-2.16-25.24-3.26-1.47-.51-7.55-4.7-8.25-4.73-.78-.03-7.15,3.06-8.63,3.37-6.58,1.38-20.1,3.02-25.6-.67-4.08-2.73-5.67-10.17-6.29-10.2-.36-.02-5.23,3.81-5.87,4.11-15.64,7.31-20.03,11.25-34.39-1.86-.92-.84-2.57-4.15-4.8-5.19-3.68-1.73-7.98.63-11.18-2.81.01-1.73,11.75-.1,13.65-.84,1.74-.67,1.04-3.89,1.96-4.79.23-.23,4.89-3.31,5.24-3.51,3.44-1.87,11.96,1.07,13.74,4.54,2.66,5.2.99,5.56-2.09,9.35,3.67,1.33,7.29-1.11,10.16-1.39,2.68-.26,2.83,2.02,8.68-.51,9.11-3.95,1.94-4.88,6.14-11.6l.76,2.99c3.81-7.34,6.28-19.74,14.3-24.19,2.42-1.34,9.04-3.38,9.93.57,1.28,5.68-3.49,9.24-6.49,13.37-.65.9-.31,2.19-.96,3.04-1.28,1.67-6.84,5.61-7.3,6.75-.42,1.06.42,2.04.18,2.63-.87,2.15-5.21,4.39,2.38,6.3,7.57,1.91,16.34-2.3,22.73-6.17,2.83-15.54,12.37-43.15,33.52-36.46,7.83,2.48,3.53,7.43,1.78,12.52ZM368.5,95.25c-2.89-2.39-12.38,11.11-11.49,11.99,1.46,1.45,12.32-11.31,11.49-11.99Z" />
                    <path class="signature-path"
                        d="M184.5,40.25c12.25.41,7.5-9.29,13.26-15.5l2.49,8.48c4.32-4.39,5.82-8.92,12.99-8.48l14.12,8.92c1.29.04,3.85-2.59,5.52-3.29,1.85-.77,3.57,1.13,2.87-1.63,4.49,1.19,7.44,9.28,11.03,9.96,13.23,2.5,10.56-10.01,17.97-13.47,2.66-1.24,11.64-1.89,13.18.57.58.92-2.75,9.02,1.44,10.81,5.12,2.19,26.02-.47,30.8-3.96,1.61-1.18,3.31-4.36,3.59-4.42,1.48-.32,1.06,2.5,1.71,3.28,2.32,2.78,9.75,3.77,2.5,8.93-9.77,6.95-27.69,11.31-39.58,9.65-3.45-.48-9.01-3.72-10.11-3.82-1.27-.12-7.91,4.45-10.94,5.03-4.96.96-10.57.96-14.67-2.24-1.81-1.42-4.67-7.57-7.86-6.38-.57.21-2.52,9.14-7.55,8.61-1.04-.11-8.72-10.49-10.06-12.01-1.48-1.68-3.84-.97-3.7-4.05,1.82-.25.27,1.41,2.24,2,1,.3,3.94.31,3.6-1.27-.48-2.24-2.46-.29-2.85-.47-1.2-.54-1.81-6.97-3.74-5.76-2.25,1.4.38,4.28.24,4.49s-1.5-.95-1.9,1.91c-.2,1.4.74,2,.65,2.64-.32,2.39-1.3,7.75-2.11,9.85-.28.72-4.55,7.4-4.98,7.54-3.96,1.31-3.3-9.53-4.93-9.94-.46-.11-5.97,4.47-7.87,5.12-7.22,2.47-15.01,3.59-22.5,2.27-2.46-.43-8.78-3.07-11.05-2.88-4.21.36-12.85,10.36-18.96,10.81-6.58.48-4.41-2.81-6.46-5.2-.46-.54-2.51-.44-2.87-1.36-.46-1.17,14.36-5.92,15.95-8.04l34.37-27.14c2.65.02,4.23,17.51,4.16,20.43ZM271.99,26.25c-.58-.57-4.73,1.84-3.49,2.99,1.09,1.02,4.47-2.03,3.49-2.99ZM235.99,34.25l-3.99,1.24,3.66.27.33-1.51Z" />
                    <path class="signature-path"
                        d="M329.99.74c-.07.1-1.24.06-1.42.82-.9,3.71.51,6.06-5.05,7.96-1.82.62-4.37.1-5.9.56-10.7,3.21-27.17,9.69-37.92,10.66-1.17.10-5.85-1.36-6.38-1.93-.67-.72-.32-2.55-1.56-4.06-.67-.81-7.5-3.77-6.25-4.49.51-.29,9.31.19,11.67-.07,12.56-1.4,33.48-3.96,45.22-7.28.53-.15,9.43-4.61,7.6-2.15Z" />
                    <path class="signature-path"
                        d="M303.34,142.39c.41.27,3.03,4.46,3.05,5,.02.51-1.77,9.55-1.99,10.01-2.8,6.05-8.24-6.68-8.41-8.86-.02-.21.84-3.93,1-4.06.38-.32,1.16.41,1.39.2,1.03-.91,2.18-4.08,4.95-2.29Z" />
                    <path class="signature-path"
                        d="M322.38,156.64c-.11.27-3.4,4.43-3.68,4.52-5.31,1.57-7.15-16.32-.37-16.35,2.28-.01,4.98,9.51,4.04,11.84Z" />
                    <path class="signature-path"
                        d="M462.82,85.57c-5.5,7.03-8.45-7.82-5.11-10.36,1.92-1.46,5.64.3,6.78-3.45.07,3.99.85,10.59-1.67,13.82Z" />
                    <path class="signature-path"
                        d="M450.35,82.1c-5.51,5.43-10.49-5.76-4.63-8.89,1.66-.89,3.03-.09,4.18-.58.16-.07,1.3-2.39,1.86-2.37,2.48.08-.23,10.69-1.4,11.84Z" />
                </svg>
            </div>

            <div class="menu-items">
                <!-- PAINTINGS -->
                <div class="has-submenu" id="paintings-menu">
                    <span class="category-header" data-filter="painting">Paintings</span>
                    <div class="sub-sub-menu">
                        <a href="#" class="sub-sub-link" data-filter="painting" data-medium="oil">Oil on Canvas</a>
                        <a href="#" class="sub-sub-link" data-filter="painting" data-medium="wood">Oil on Wood</a>
                        <a href="#" class="sub-sub-link" data-filter="painting" data-medium="mixed">Mixed Media</a>
                    </div>
                </div>

                <!-- DRAWINGS -->
                <div class="has-submenu" id="drawings-menu">
                    <span class="category-header" data-filter="drawing">Drawings</span>
                    <div class="sub-sub-menu">
                        <a href="#" class="sub-sub-link" data-filter="drawing" data-medium="charcoal">Charcoal</a>
                        <a href="#" class="sub-sub-link" data-filter="drawing" data-medium="ink">Conte & Ink</a>
                        <a href="#" class="sub-sub-link" data-filter="drawing" data-medium="animation">Animation</a>
                    </div>
                </div>

                <!-- 3D-ART -->
                <div class="has-submenu" id="3dart-menu">
                    <span class="category-header" data-filter="3d-art">3D-Art</span>
                    <div class="sub-sub-menu">
                        <a href="#" class="sub-sub-link" data-filter="3d-art" data-medium="ceramic">Ceramic</a>
                        <a href="#" class="sub-sub-link" data-filter="3d-art" data-medium="sculpture">Soft Sculpture</a>
                        <a href="#" class="sub-sub-link" data-filter="3d-art" data-medium="mixed-materials">Mixed
                            Materials</a>
                    </div>
                </div>

                <!-- Divider before Collections -->
                <div class="menu-divider"></div>

                <!-- COLLECTIONS -->
                <div class="has-submenu" id="collections-menu">
                    <span class="category-header" data-filter="all">Collections</span>
                    <div class="sub-sub-menu">
                        <a href="#" class="sub-sub-link" data-collection="thailand-days">Thailand Days</a>
                        <a href="#" class="sub-sub-link" data-collection="cafe-raices">Café y Raíces</a>
                        <a href="#" class="sub-sub-link" data-collection="life-studies">Life Studies</a>
                        <a href="#" class="sub-sub-link" data-collection="individual">Individual Works</a>
                    </div>
                </div>

                <!-- Divider before secondary nav -->
                <div class="menu-divider"></div>

                <!-- Secondary Navigation -->
                <div class="secondary-nav">
                    <span class="category-header" onclick="window.location.href='about.html'">About</span>
                    <span class="category-header"
                        onclick="window.open('https://www.instagram.com/esmebellle/', '_blank')">Instagram</span>
                </div>
            </div>

            <div class="socials">
                <!-- Kept for layout spacing -->
            </div>
        </nav>

        <main>
            <div class="art-feed" id="art-feed">
                <!-- Artworks rendered via JS -->
            </div>
        </main>
    </div>

    <script>
        // --- DATA: ALL ARTWORKS ---
        const artworks = [
            // --- PAINTINGS (and 2D Design) ---
            { src: 'assets/images/kitchen_towel.jpg', type: 'painting', title: 'Kitchen Towel', medium: 'Oil on Canvas', size: '8" x 10"' },
            // { src: 'assets/images/bourbon.jpg', type: 'painting', title: 'Bourbon', medium: 'Gouache on Bristol Paper', size: '9" x 12"' },
            { images: ['assets/images/cuanto_frijoles.jpg', 'assets/images/cuanto_friojoles_gallery.jpg'], type: 'painting', title: 'Cuanto Frijoles?', medium: 'Oil on Blanket as Canvas', size: '36" x 48"' },
            { src: 'assets/images/normalcy.jpg', type: 'painting', title: 'Normalcy', medium: 'Mixed Media, Oil on Canvas', size: '18" x 24"' },
            { src: 'assets/images/papusas.jpg', type: 'painting', title: 'Papusas', medium: 'Oil on Preloved Canvas', size: '9" x 12"' },
            { src: 'assets/images/With Her Hands.jpg', type: 'painting', title: 'With Her Hands', medium: 'Oil on Preloved Canvas', size: '12" x 18"' },
            { src: 'assets/images/thailand_days_landscape.jpeg', type: 'painting', title: 'Thailand Days (Landscape)', medium: 'Oil on Birchwood Plywood', size: '20" x 40" x 1"' },
            { src: 'assets/images/thailand_days_portrait.JPG', type: 'painting', title: 'Thailand Days (Portrait)', medium: 'Oil on Birchwood Plywood', size: '20" x 40" x 1"' },
            { src: 'assets/images/thailand_days_gallery.jpg', type: 'painting', title: 'Thailand Days (Gallery)', medium: 'Oil on Birchwood Plywood', size: '20" x 40" x 1"' },

            // --- DRAWINGS ---
            { src: 'assets/images/Turbo Granny.jpg', type: 'drawing', title: 'Turbo Granny', medium: 'Charcoal on Paper', size: '18" x 24"' },
            { src: 'assets/images/tres_huevos.JPEG', type: 'drawing', title: 'Tres Huevos', medium: 'Willow Charcoal on Paper', size: '18" x 24"' },
            { src: 'assets/images/frenchie_fries.jpg', type: 'drawing', title: 'Frenchie Fries', medium: 'Charcoal, Digital Drawing', size: '18" x 24"' },
            { src: 'assets/images/Inherited Fragments.jpg', type: 'drawing', title: 'Inherited Fragments', medium: 'Charcoal on Paper', size: '18" x 24"' },
            { src: 'assets/images/girl_and_panaag.gif', type: 'drawing', title: 'Girl & Panaag', medium: 'Animation, Graphite on Paper', size: '5" x 7"' },
            { src: 'assets/images/double_vision.jpg', type: 'drawing', title: 'Double Vision', medium: 'Conte, India Ink on Paper', size: '18" x 24"' },
            { src: 'assets/images/life_drawing.jpg', type: 'drawing', title: 'Life Drawing', medium: 'Charcoal on Paper', size: '18" x 24"' },
            // Removed missing artworks: untitled_seated_nude.jpg, untitled_standing.jpg

            // --- 3D-ART ---
            { images: ['assets/images/maximus1.jpg', 'assets/images/maximus2.jpg'], type: '3d-art', title: 'Maximus', medium: 'Soft Sculpture Reconstructed Plush', size: '12" x 7" x 4"' },
            { images: ['assets/images/concrete_planter4.jpeg', 'assets/images/concrete_planter.jpeg', 'assets/images/concrete_planter2.jpeg', 'assets/images/concrete_planter3.jpeg'], type: '3d-art', title: 'Concrete Jungle Planter', medium: 'Ceramic', size: '10" x 10" x 10"' },
            { images: ['assets/images/queens_gambit_collection.jpg', 'assets/images/queens_gambit_piece.jpg'], type: '3d-art', title: "Queen's Gambit", medium: 'Ceramic', size: '24" x 7" x 5-6"' },
            { images: ['assets/images/ines_tribute_collection.JPG', 'assets/images/ines_tribute_portrait.jpg', 'assets/images/ines_tribute_mug1.jpg', 'assets/images/ines_tribute_mug1_top.jpg', 'assets/images/ines_tribute_mug2.jpg', 'assets/images/ines_tribute_mug3.jpg', 'assets/images/ines_tribute_mug3_top.jpg', 'assets/images/ines_tribute_mug4.jpg', 'assets/images/ines_tribute_mug4_top.jpg', 'assets/images/ines_tribute_mug5.jpg'], type: '3d-art', title: 'Café y Raíces: A Tribute to Ines', medium: 'Ceramic', size: 'Portrait: 12"x7"x1", Mugs: 4-4.5"x3-4"' },
            // { src: 'assets/images/stoned.jpg', type: '3d-art', title: 'Stoned', medium: 'Ceramic', size: '12" x 14" x 8"' },
            { images: ['assets/images/tHE jOURNEY oF uS.jpg', 'assets/images/tHE jOURNEY oF uS_closeup.jpg', 'assets/images/tHE jOURNEY oF uS_side_view_1.jpg', 'assets/images/tHE jOURNEY oF uS_side_view_2.jpg', 'assets/images/tHE jOURNEY oF uS_45_view.jpg'], type: '3d-art', title: 'The Journey of Us', medium: 'Cardboard, Acrylic, Photo Paper', size: '15" x 17" x 2.5"' }
        ];

        // --- 1. CURSOR ---
        const cursor = document.getElementById('cursor');
        document.addEventListener('mousemove', (e) => {
            cursor.style.left = e.clientX + 'px';
            cursor.style.top = e.clientY + 'px';
        });

        function attachCursorHover() {
            document.querySelectorAll('a').forEach(el => {
                el.addEventListener('mouseenter', () => cursor.classList.add('hovered'));
                el.addEventListener('mouseleave', () => cursor.classList.remove('hovered'));
            });
        }
        attachCursorHover();

        // --- 2. RENDER LOGIC ---
        const artFeed = document.getElementById('art-feed');
        const dotsContainer = document.getElementById('progress-dots');

        let observer; // Global observer

        function renderArtworks(filterType = 'all') {
            // Clear current
            artFeed.innerHTML = '';
            dotsContainer.innerHTML = '';

            // Filter
            const filtered = filterType === 'all'
                ? artworks
                : artworks.filter(art => art.type === filterType);

            // Populate HTML
            filtered.forEach(art => {
                const card = document.createElement('div');
                card.className = 'art-card';
                card.dataset.type = art.type;
                card.dataset.title = art.title;
                card.dataset.medium = art.medium;
                card.dataset.size = art.size || '';

                const wrapper = document.createElement('div');
                wrapper.className = 'image-wrapper';

                // Check if artwork has multiple images
                const hasMultipleImages = art.images && art.images.length > 1;

                if (hasMultipleImages) {
                    // Create carousel for multi-angle artworks
                    new Carousel(wrapper, art.images, art.title);
                } else if (art.video) {
                    // Video artwork
                    const video = document.createElement('video');
                    video.src = art.video;
                    video.poster = art.src;
                    video.alt = art.title;
                    video.className = 'artwork-video';
                    video.muted = true;
                    video.playsInline = true;
                    video.preload = 'metadata';

                    // Create unmute button
                    const controlsWrapper = document.createElement('div');
                    controlsWrapper.className = 'video-controls-wrapper';

                    const unmuteBtn = document.createElement('button');
                    unmuteBtn.className = 'unmute-btn';
                    unmuteBtn.innerHTML = '🔇';
                    unmuteBtn.setAttribute('aria-label', 'Unmute video');

                    // Toggle mute on click
                    unmuteBtn.addEventListener('click', () => {
                        if (video.muted) {
                            video.muted = false;
                            unmuteBtn.innerHTML = '🔊';
                            unmuteBtn.setAttribute('aria-label', 'Mute video');
                        } else {
                            video.muted = true;
                            unmuteBtn.innerHTML = '🔇';
                            unmuteBtn.setAttribute('aria-label', 'Unmute video');
                        }
                    });

                    // Hide button when video ends
                    video.addEventListener('ended', () => {
                        controlsWrapper.style.opacity = '0';
                        controlsWrapper.style.pointerEvents = 'none';
                    });

                    // Fallback if video fails to load
                    video.addEventListener('error', (e) => {
                        console.error('Video failed to load:', e);
                        const img = document.createElement('img');
                        img.src = art.src;
                        img.alt = art.title;
                        img.loading = "lazy";
                        wrapper.innerHTML = '';
                        wrapper.appendChild(img);
                    });

                    controlsWrapper.appendChild(unmuteBtn);
                    wrapper.appendChild(video);
                    wrapper.appendChild(controlsWrapper);
                    wrapper.dataset.hasVideo = 'true';
                } else {
                    // Single image - simple img element
                    const imageSrc = art.src || art.images[0];
                    const img = document.createElement('img');
                    img.src = imageSrc;
                    img.alt = art.title;
                    img.loading = "lazy";
                    wrapper.appendChild(img);
                }

                // Add Mobile Metadata Inside Card
                const mobileMeta = document.createElement('div');
                mobileMeta.className = 'mobile-meta';

                const mTitle = document.createElement('h3');
                mTitle.textContent = art.title;

                const mDetail = document.createElement('p');
                mDetail.textContent = art.medium + (art.size ? ` (${art.size})` : '');

                mobileMeta.appendChild(mTitle);
                mobileMeta.appendChild(mDetail);

                card.appendChild(wrapper);
                card.appendChild(mobileMeta); // Added after wrapper

                artFeed.appendChild(card);
            });

            // Re-initialize dots
            filtered.forEach((_, index) => {
                const dot = document.createElement('div');
                dot.className = 'dot';
                if (index === 0) dot.classList.add('active');
                dotsContainer.appendChild(dot);
            });

            // Re-initialize Observer
            setTimeout(() => {
                initObserver();
            }, 100);
        }

        // --- 3. SCROLL OBSERVER ---
        const metaTitle = document.getElementById('meta-title');
        const metaDetails = document.getElementById('meta-details');

        // Dynamic Background
        const bgDynamic = document.getElementById('bg-dynamic');

        // PREDEFINED COLORS PER CATEGORY
        const BG_COLORS = {
            '3d-art': 'var(--bg-clay)',      // #e0cec7
            'painting': 'var(--bg-pinstripe-1)', // #fdfbf7
            'drawing': 'var(--bg-pinstripe-2)',  // #c4d0e0
            'default': '#fdfbf7'
        };

        function setBackground(type) {
            bgDynamic.style.backgroundColor = BG_COLORS[type] || BG_COLORS['default'];
        }

        function initObserver() {
            if (observer) observer.disconnect();

            const cards = document.querySelectorAll('.art-card');
            const dots = document.querySelectorAll('.dot');

            const observerOptions = {
                root: null,
                rootMargin: '-40% 0px -40% 0px',
                threshold: 0
            };

            observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const card = entry.target;
                        const index = Array.from(cards).indexOf(card);

                        // 1. Update Text (Desktop)
                        metaTitle.textContent = card.dataset.title || 'Untitled';
                        metaDetails.textContent = card.dataset.medium + (card.dataset.size ? ' (' + card.dataset.size + ')' : '') || 'Various Media';

                        // 2. Update Dots (Desktop)
                        dots.forEach(d => d.classList.remove('active'));
                        if (dots[index]) dots[index].classList.add('active');

                        // 3. Update Background based on TYPE
                        setBackground(card.dataset.type || 'default');

                        // 4. Autoplay video when in view
                        const videoWrapper = card.querySelector('.image-wrapper[data-has-video="true"]');
                        if (videoWrapper) {
                            const video = videoWrapper.querySelector('video');
                            if (video && video.paused) {
                                video.play().catch(err => {
                                    console.log('Autoplay prevented:', err);
                                });
                            }
                        }
                    } else {
                        // Pause and reset video when out of view
                        const card = entry.target;
                        const videoWrapper = card.querySelector('.image-wrapper[data-has-video="true"]');
                        if (videoWrapper) {
                            const video = videoWrapper.querySelector('video');
                            if (video && !video.paused) {
                                video.pause();
                                video.currentTime = 0;
                            }
                        }
                    }
                });
            }, observerOptions);

            cards.forEach(card => observer.observe(card));

            // Initialize first card
            if (cards.length > 0) {
                metaTitle.textContent = cards[0].dataset.title;
                metaDetails.textContent = cards[0].dataset.medium + (cards[0].dataset.size ? ' (' + cards[0].dataset.size + ')' : '');
                setBackground(cards[0].dataset.type || 'default');
            } else {
                metaTitle.textContent = "";
                metaDetails.textContent = "";
                setBackground('default');
            }
        }

        // --- 4. NAVIGATION HANDLERS ---
        const mainNav = document.getElementById('main-nav');
        const menuToggle = document.getElementById('menu-toggle');
        const closeMenuBtn = document.getElementById('close-menu-btn');
        // Toggle Menu (Mobile) - with scroll lock
        let savedScrollY = 0;

        function openMenu() {
            savedScrollY = window.scrollY;
            mainNav.classList.add('open');
            document.body.classList.add('menu-open');
            document.body.style.top = `-${savedScrollY}px`;
            menuToggle.style.color = '#000';
        }

        function closeMenu() {
            mainNav.classList.remove('open');
            document.body.classList.remove('menu-open');
            document.body.style.top = '';
            // Always scroll past the hero so artwork is visible
            const hero = document.getElementById('hero');
            const minScroll = hero ? hero.offsetTop + hero.offsetHeight : 0;
            window.scrollTo(0, Math.max(savedScrollY, minScroll));
            menuToggle.textContent = 'Menu';
            menuToggle.style.color = '';
        }

        menuToggle.addEventListener('click', openMenu);

        // Close Button (Mobile)
        closeMenuBtn.addEventListener('click', closeMenu);

        // Click-based expansion for main "Works" menu
        document.querySelectorAll('.has-submenu > .nav-link').forEach(link => {
            link.addEventListener('click', (e) => {
                const href = link.getAttribute('href');
                if (href && !href.startsWith('#')) return;

                e.preventDefault();
                const parent = link.parentElement;

                // If clicking on "Works" with data-filter="all", show all and toggle menu
                if (link.dataset.filter === 'all') {
                    parent.classList.toggle('open');
                    // Also filter to all
                    renderArtworks('all');
                }
            });
        });

        // Click-based expansion for category headers (Paintings, Drawings, 3D-Art)
        // Only toggles submenu - does not filter or scroll
        document.querySelectorAll('.category-header').forEach(header => {
            header.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();

                // Toggle open state for sub-sub-menu only
                header.classList.toggle('open');
            });
        });

        // Medium filtering (sub-sub-links)
        document.querySelectorAll('.sub-sub-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const filterType = link.dataset.filter;
                const medium = link.dataset.medium;

                renderArtworksByMedium(filterType, medium);

                // Close mobile menu
                closeMenu();
            });
        });

        // Collection filtering
        document.querySelectorAll('[data-collection]').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const collection = link.dataset.collection;

                renderArtworksByCollection(collection);

                // Close mobile menu
                closeMenu();
            });
        });

        // Filter by medium within a category
        function renderArtworksByMedium(type, medium) {
            artFeed.innerHTML = '';
            dotsContainer.innerHTML = '';

            const mediumMappings = {
                // Paintings
                'oil': ['Oil on Canvas', 'Oil on Blanket', 'Oil on Preloved Canvas'],
                'wood': ['Oil on Birchwood Plywood'],
                'mixed': ['Mixed Media'],
                // Drawings
                'charcoal': ['Charcoal on Paper', 'Willow Charcoal on Paper', 'Charcoal, Digital Drawing'],
                'ink': ['Conte, India Ink on Paper'],
                'animation': ['Animation, Graphite on Paper'],
                // 3D-Art
                'ceramic': ['Ceramic'],
                'sculpture': ['Soft Sculpture Reconstructed Plush'],
                'mixed-materials': ['Cardboard, Acrylic, Photo Paper']
            };

            const matchTerms = mediumMappings[medium] || [];

            const filtered = artworks.filter(art => {
                if (art.type !== type) return false;
                return matchTerms.some(term => art.medium.includes(term));
            });

            renderFilteredArtworks(filtered);
        }

        // Filter by collection/series
        function renderArtworksByCollection(collection) {
            artFeed.innerHTML = '';
            dotsContainer.innerHTML = '';

            const collectionMappings = {
                'thailand-days': ['Thailand Days'],
                'cafe-raices': ['Café y Raíces', 'Tribute to Ines'],
                'life-studies': ['Life Drawing', 'Double Vision', 'Tres Huevos']
            };

            let filtered;

            if (collection === 'individual') {
                // Individual Works = everything NOT in a collection
                const allCollectionTerms = Object.values(collectionMappings).flat();
                filtered = artworks.filter(art => {
                    return !allCollectionTerms.some(term => art.title.includes(term));
                });
            } else {
                const matchTerms = collectionMappings[collection] || [];
                filtered = artworks.filter(art => {
                    return matchTerms.some(term => art.title.includes(term));
                });
            }

            renderFilteredArtworks(filtered, true);
        }

        // Helper function to render filtered artworks
        // expandImages: when true, multi-image artworks become individual cards (no carousels)
        function renderFilteredArtworks(filtered, expandImages = false) {
            filtered.forEach(art => {
                const hasMultipleImages = art.images && art.images.length > 1;

                if (expandImages && hasMultipleImages) {
                    // Expand each image into its own card
                    art.images.forEach((imageSrc, i) => {
                        const card = document.createElement('div');
                        card.className = 'art-card';
                        card.dataset.type = art.type;
                        card.dataset.title = `${art.title} - View ${i + 1}`;
                        card.dataset.medium = art.medium;
                        card.dataset.size = art.size || '';

                        const wrapper = document.createElement('div');
                        wrapper.className = 'image-wrapper';

                        const img = document.createElement('img');
                        img.src = imageSrc;
                        img.alt = `${art.title} - View ${i + 1}`;
                        img.loading = "lazy";
                        wrapper.appendChild(img);

                        const mobileMeta = document.createElement('div');
                        mobileMeta.className = 'mobile-meta';

                        const mTitle = document.createElement('h3');
                        mTitle.textContent = `${art.title} - View ${i + 1}`;

                        const mDetail = document.createElement('p');
                        mDetail.textContent = art.medium + (art.size ? ` (${art.size})` : '');

                        mobileMeta.appendChild(mTitle);
                        mobileMeta.appendChild(mDetail);

                        card.appendChild(wrapper);
                        card.appendChild(mobileMeta);

                        artFeed.appendChild(card);
                    });
                } else {
                    const card = document.createElement('div');
                    card.className = 'art-card';
                    card.dataset.type = art.type;
                    card.dataset.title = art.title;
                    card.dataset.medium = art.medium;
                    card.dataset.size = art.size || '';

                    const wrapper = document.createElement('div');
                    wrapper.className = 'image-wrapper';

                    if (hasMultipleImages) {
                        new Carousel(wrapper, art.images, art.title);
                    } else {
                        const imageSrc = art.src || art.images[0];
                        const img = document.createElement('img');
                        img.src = imageSrc;
                        img.alt = art.title;
                        img.loading = "lazy";
                        wrapper.appendChild(img);
                    }

                    const mobileMeta = document.createElement('div');
                    mobileMeta.className = 'mobile-meta';

                    const mTitle = document.createElement('h3');
                    mTitle.textContent = art.title;

                    const mDetail = document.createElement('p');
                    mDetail.textContent = art.medium + (art.size ? ` (${art.size})` : '');

                    mobileMeta.appendChild(mTitle);
                    mobileMeta.appendChild(mDetail);

                    card.appendChild(wrapper);
                    card.appendChild(mobileMeta);

                    artFeed.appendChild(card);
                }
            });

            // Re-initialize dots based on actual rendered cards
            const cards = artFeed.querySelectorAll('.art-card');
            cards.forEach((_, index) => {
                const dot = document.createElement('div');
                dot.className = 'dot';
                if (index === 0) dot.classList.add('active');
                dotsContainer.appendChild(dot);
            });

            // Re-initialize Observer
            setTimeout(() => {
                initObserver();
            }, 100);
        }


        class Carousel {
            constructor(wrapper, images, title) {
                this.wrapper = wrapper;
                this.images = images;
                this.title = title;
                this.track = null;
                this.indicators = [];
                this.observer = null;
                this.activeIndex = 0;

                this.init();
            }

            init() {
                this.createDOM();
                this.attachEventListeners();
                this.initObserver();
            }

            createDOM() {
                // Create carousel structure
                const container = document.createElement('div');
                container.className = 'carousel-container';

                // Create left arrow button
                const leftArrow = document.createElement('button');
                leftArrow.className = 'carousel-arrow carousel-arrow-left';
                leftArrow.innerHTML = '‹';
                leftArrow.setAttribute('aria-label', 'Previous image');

                // Create right arrow button
                const rightArrow = document.createElement('button');
                rightArrow.className = 'carousel-arrow carousel-arrow-right';
                rightArrow.innerHTML = '›';
                rightArrow.setAttribute('aria-label', 'Next image');

                const track = document.createElement('div');
                track.className = 'carousel-track';

                this.images.forEach((src, index) => {
                    const img = document.createElement('img');
                    img.src = src;
                    img.alt = `${this.title} - View ${index + 1}`;
                    img.className = 'carousel-image';
                    img.draggable = false;
                    track.appendChild(img);
                });

                container.appendChild(leftArrow);
                container.appendChild(track);
                container.appendChild(rightArrow);
                this.wrapper.appendChild(container);

                // Create indicator dots
                const indicatorsContainer = document.createElement('div');
                indicatorsContainer.className = 'carousel-indicators';

                this.images.forEach((_, index) => {
                    const dot = document.createElement('div');
                    dot.className = 'carousel-indicator';
                    if (index === 0) dot.classList.add('active');
                    indicatorsContainer.appendChild(dot);
                    this.indicators.push(dot);
                });

                this.wrapper.appendChild(indicatorsContainer);

                this.container = container;
                this.track = track;
            }

            attachEventListeners() {
                const leftArrow = this.container.querySelector('.carousel-arrow-left');
                const rightArrow = this.container.querySelector('.carousel-arrow-right');

                leftArrow.addEventListener('click', () => {
                    this.scrollToIndex(this.activeIndex - 1);
                });

                rightArrow.addEventListener('click', () => {
                    this.scrollToIndex(this.activeIndex + 1);
                });
            }

            scrollToIndex(index) {
                if (index < 0 || index >= this.images.length) return;

                const target = this.track.children[index];
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'nearest',
                        inline: 'center'
                    });
                }
            }

            initObserver() {
                const options = {
                    root: this.track,
                    threshold: 0.5
                };

                this.observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const index = Array.from(this.track.children).indexOf(entry.target);
                            this.activeIndex = index;
                            this.updateIndicators(index);
                            this.updateArrowVisibility(index);
                        }
                    });
                }, options);

                Array.from(this.track.children).forEach(img => {
                    this.observer.observe(img);
                });

                // Init state
                this.updateArrowVisibility(0);
            }

            updateIndicators(activeIndex) {
                this.indicators.forEach((dot, index) => {
                    if (index === activeIndex) {
                        dot.classList.add('active');
                    } else {
                        dot.classList.remove('active');
                    }
                });
            }

            updateArrowVisibility(index) {
                const leftArrow = this.container.querySelector('.carousel-arrow-left');
                const rightArrow = this.container.querySelector('.carousel-arrow-right');
                const total = this.images.length;

                // Disable left arrow at first image
                leftArrow.style.opacity = index === 0 ? '0.3' : '1';
                leftArrow.style.pointerEvents = index === 0 ? 'none' : 'auto';

                // Disable right arrow at last image
                rightArrow.style.opacity = index === total - 1 ? '0.3' : '1';
                rightArrow.style.pointerEvents = index === total - 1 ? 'none' : 'auto';
            }
        }

        // --- INITIAL RENDER ---
        renderArtworks('all');

        // --- SVG SIGNATURE ANIMATION SETUP ---
        function initSignatureAnimation() {
            const signaturePaths = document.querySelectorAll('.signature-path');

            signaturePaths.forEach(path => {
                const length = path.getTotalLength();
                path.style.setProperty('--path-length', length);
                path.style.strokeDasharray = length;
                path.style.strokeDashoffset = length;
            });
        }

        // Run on page load
        window.addEventListener('DOMContentLoaded', initSignatureAnimation);

    </script>
</body>

</html>